<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>FLC Live</title>
<link rel="stylesheet" href="flclive.css">
<!-- required for the redirectToSystemBrowser() function -->
<script src="phonegap.js"></script>
<!-- used to change the formats of dates -->
<script src="date.js"></script>
<!-- jquery (we might as well use it) -->
<script src="jquery-1.10.1.min.js"></script>
<!-- our javascripts -->
<script src="flclive.js"></script>
</head>
<body class="home">
<div id="content"></div>
<!-- page specific javascripts -->
<script>
// tell the function where the JSON data is
fetchJSONFile('http://www.flcbranson.org/api/livebroadcast', function(data){
	// do something with your data
	// alert(JSON.stringify(data));
	// alert(data.datetime + ', ' + data.status);
	if (data.status == 'flcb' || data.status == 'flcs') {
		//window.location = 'http://www.flcbranson.org/liveapp';
		document.getElementById('content').innerHTML = '<video src="' + data.publishingpoint_hls + '"  poster="http://www.flcbranson.org/images/Posters/Flcb.jpg" autoplay controls x-webkit-airplay="allow" loop>Please visit the <a href="http://www.flcbranson.org">Faith Life Church website</a> with a compatible device or computer to watch our live service.</video>';
	} else {
		document.getElementById('content').innerHTML = '\
<header>\n\
	<h1><a href="index.html"><abbr title="Faith Life Church">FLC</abbr> Live</a></h1>\n\
</header>\n\
<div class="boxeswrapper">\n\
	<section id="livebroadcasts" class="box">\n\
		<h2>Live Broadcasts</h2>\n\
		<dl>\n\
			<dt>Sunday</dt>\n\
			<dd>9:00 AM &amp; 11:00 AM Central</dd>\n\
			<dt>Friday</dt>\n\
			<dd>6:30 PM Central</dd>\n\
		</dl>\n\
	</section>\n\
	<section id="rebroadcasts" class="box">\n\
		<h2>Rebroadcasts</h2>\n\
		<dl>\n\
			<dt>Most Recent, Full Service</dt>\n\
			<dd><a href="javascript:sundayRebroadcast();">Sunday</a></dd>\n\
			<dd><a href="javascript:fridayRebroadcast();">Friday</a></dd>\n\
		</dl>\n\
	</section>\n\
	<section id="featuredseries" class="box">\n\
		<h2>Featured Series</h2>\n\
		<div id="featuredseriestitle"></div>\n\
	</section>\n\
	<section id="externallinks" class="box">\n\
		<h2>External Links <small>opens in system browser</small></h2>\n\
		<ul>\n\
			<li><a href="javascript:redirectToSystemBrowser(\'http://www.flcbranson.org/\');">Official <abbr title="Faith Life Church">FLC</abbr> Website</a></li>\n\
			<li><a href="javascript:redirectToSystemBrowser(\'https://faithlifechurchbranson.thankyou4caring.org/\');">Sow to <abbr title="Faith Life Church">FLC</abbr></a></li>\n\
		</ul>\n\
	</section>\n\
</div>\n\
<div id="pointlessdivforbackgroundimage"></div>\n\
<scr' + 'ipt>\n\
// google analytics\n\
var _gaq = _gaq || [];\n\
_gaq.push([\'_setAccount\', \'UA-39575525-1\']);\n\
_gaq.push([\'_trackPageview\']);\n\
(function() {\n\
	var ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\n\
	ga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\n\
	var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n\
})();\n\
</scr' + 'ipt>\
';
	}
});

// tell the function where the JSON data is
fetchJSONFile('http://www.flcbranson.org/api/featuredseries', function(data) {
	// do something with your data
	// alert(JSON.stringify(data));
	// alert(data.title + ', ' + data.camelcase);
	document.getElementById('featuredseriestitle').innerHTML = '<a href="featuredseries.html">' + data.title + '</a>';
});

function sundayRebroadcast() {
	// tell the function where the JSON data is
	fetchJSONFile('http://www.flcbranson.org/api/rebroadcast', function(data){
		// do something with your data
		// alert(JSON.stringify(data));
		// alert(data.sunday + ', ' + data.friday);
		//var sundayrebroadcastlink = 'http://www.flcbranson.org/liveapp/?rebroadcastsite=' + data.sunday + '&rebroadcastday=sun';
		//window.location = sundayrebroadcastlink;
		document.getElementById('content').innerHTML = '<video src="' + data.sunday_publishingpoint_smoothstreaming + '"  poster="http://www.flcbranson.org/images/Posters/Flcb.jpg" autoplay controls x-webkit-airplay="allow" loop>Please visit the <a href="http://www.flcbranson.org">Faith Life Church website</a> with a compatible device or computer to watch our live service.</video>';
	});
}
function fridayRebroadcast() {
	// tell the function where the JSON data is
	fetchJSONFile('http://www.flcbranson.org/api/rebroadcast', function(data){
		// do something with your data
		// alert(JSON.stringify(data));
		// alert(data.sunday + ', ' + data.friday);
		//var fridayrebroadcastlink = 'http://www.flcbranson.org/liveapp/?rebroadcastsite=' + data.friday + '&rebroadcastday=fri';
		//window.location = fridayrebroadcastlink;
		document.getElementById('content').innerHTML = '<video src="' + data.friday_publishingpoint_smoothstreaming + '"  poster="http://www.flcbranson.org/images/Posters/Flcb.jpg" autoplay controls x-webkit-airplay="allow" loop>Please visit the <a href="http://www.flcbranson.org">Faith Life Church website</a> with a compatible device or computer to watch our live service.</video>';
	});
}
</script>
</body>
</html>